import{r as t,h as e,H as n,g as r,f as i}from"./p-2dcdb1f0.js";const o=":host{display:block}";const s=class{constructor(e){t(this,e)}render(){return e(n,null,e("slot",null),e("arcgis-stat-card",{"value-color":"","card-title":"Pageviews","title-tooltip":"Every visit to this item's page.",subtitle:"Last 30 Days",value:"1,042","text-align":"end","trailing-text":"",unit:"","unit-position":"after",corners:"squared",shareable:"true","shareable-by-value":"false","shareable-on-hover":"true"},e("calcite-icon",{icon:"arrow-bold-up",slot:"value-media"}),e("div",{slot:"footer"},e("svg",{width:"100%",viewBox:"0 0 440 120",class:"chart"},e("polyline",{fill:"none",stroke:"#0074d9","stroke-width":"2",points:"00,120 20,60 40,80 60,20 80,80 100,80 120,60 140,100 160,90 180,80 200, 110 220, 10 240, 70 260, 100 280, 100 300, 40 320, 0 340, 100 360, 100 380, 120 400, 60 420, 70 440, 80"})))))}};s.style=o;const a=[{label:"year",seconds:31536e3},{label:"month",seconds:2592e3},{label:"week",seconds:604800},{label:"day",seconds:86400},{label:"hour",seconds:3600},{label:"minute",seconds:60},{label:"second",seconds:1}];const c=t=>{const e=Math.floor(((new Date).valueOf()-new Date(t).valueOf())/1e3);const{interval:n,unit:r}=u(e);const i=n===1?"":"s";return`${n} ${r}${i} ago`};const u=t=>{for(let{label:e,seconds:n}of a){const r=Math.floor(t/n);if(r>=1){return{interval:r,unit:e}}}return{interval:0,unit:""}};const l=":host{display:block}";const d=class{constructor(e){t(this,e);this.changeTypes={add:{icon:"plus"},change:{icon:"fork-right"},fix:{icon:"debug"}};this.releases=[]}componentWillLoad(){this.getChangelog()}async getChangelog(){const t=await fetch("./data/changelog.json");const e=await t.json();this.releases=e.releases}formatDate(t){return new Date(t).toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"})}render(){return e(n,null,e("slot",null),e("calcite-accordion",{scale:"m",appearance:"solid","selection-mode":"multiple"},this.releases.map((t=>e("calcite-accordion-item",{heading:this.formatDate(t.timestamp),description:`${t.changes.length} changes ${c(t.timestamp)}`,"icon-start":"","icon-end":""},e("calcite-list",{id:"changes"},t.changes.map((t=>e("calcite-list-item",{description:t.description},e("calcite-chip",{class:"list-chip",icon:this.changeTypes[t.type].icon,scale:"s",appearance:"solid",kind:"neutral",slot:"content-start"},t.type))))))))))}};d.style=l;const f=(t,e,n)=>{const r=t.get(e);if(!r){t.set(e,[n])}else if(!r.includes(n)){r.push(n)}};const p=(t,e)=>{let n;return(...r)=>{if(n){clearTimeout(n)}n=setTimeout((()=>{n=0;t(...r)}),e)}};const h=t=>!("isConnected"in t)||t.isConnected;const m=p((t=>{for(let e of t.keys()){t.set(e,t.get(e).filter(h))}}),2e3);const g=()=>{if(typeof r!=="function"){return{}}const t=new Map;return{dispose:()=>t.clear(),get:e=>{const n=r();if(n){f(t,e,n)}},set:e=>{const n=t.get(e);if(n){t.set(e,n.filter(i))}m(t)},reset:()=>{t.forEach((t=>t.forEach(i)));m(t)}}};const b=t=>typeof t==="function"?t():t;const v=(t,e=((t,e)=>t!==e))=>{const n=b(t);let r=new Map(Object.entries(n!==null&&n!==void 0?n:{}));const i={dispose:[],get:[],set:[],reset:[]};const o=()=>{var e;r=new Map(Object.entries((e=b(t))!==null&&e!==void 0?e:{}));i.reset.forEach((t=>t()))};const s=()=>{i.dispose.forEach((t=>t()));o()};const a=t=>{i.get.forEach((e=>e(t)));return r.get(t)};const c=(t,n)=>{const o=r.get(t);if(e(n,o,t)){r.set(t,n);i.set.forEach((e=>e(t,n,o)))}};const u=typeof Proxy==="undefined"?{}:new Proxy(n,{get(t,e){return a(e)},ownKeys(t){return Array.from(r.keys())},getOwnPropertyDescriptor(){return{enumerable:true,configurable:true}},has(t,e){return r.has(e)},set(t,e,n){c(e,n);return true}});const l=(t,e)=>{i[t].push(e);return()=>{w(i[t],e)}};const d=(e,n)=>{const r=l("set",((t,r)=>{if(t===e){n(r)}}));const i=l("reset",(()=>n(b(t)[e])));return()=>{r();i()}};const f=(...t)=>{const e=t.reduce(((t,e)=>{if(e.set){t.push(l("set",e.set))}if(e.get){t.push(l("get",e.get))}if(e.reset){t.push(l("reset",e.reset))}if(e.dispose){t.push(l("dispose",e.dispose))}return t}),[]);return()=>e.forEach((t=>t()))};const p=t=>{const e=r.get(t);i.set.forEach((n=>n(t,e,e)))};return{state:u,get:a,set:c,on:l,onChange:d,use:f,dispose:s,reset:o,forceUpdate:p}};const w=(t,e)=>{const n=t.indexOf(e);if(n>=0){t[n]=t[t.length-1];t.length--}};const y=(t,e)=>{const n=v(t,e);n.use(g());return n};const{state:k,onChange:O}=y({user:null,context:null,app:null});O("user",(t=>{k.user=t}));O("context",(t=>{k.context=t;k.user=t===null||t===void 0?void 0:t._currentUser}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S=function(t,e){S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)if(e.hasOwnProperty(n))t[n]=e[n]};return S(t,e)};function D(t,e){S(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var E=function(){E=Object.assign||function t(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o))e[o]=n[o]}return e};return E.apply(this,arguments)};function $(t,e){var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0)n[r]=t[r];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++){if(e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i]))n[r[i]]=t[r[i]]}return n}function A(t){return Object.keys(t).some((function(e){var n=t[e];if(!n){return false}if(n&&n.toParam){n=n.toParam()}var r=n.constructor.name;switch(r){case"Array":return false;case"Object":return false;case"Date":return false;case"Function":return false;case"Boolean":return false;case"String":return false;case"Number":return false;default:return true}}))}function x(t){var e={};Object.keys(t).forEach((function(n){var r,i;var o=t[n];if(o&&o.toParam){o=o.toParam()}if(!o&&o!==0&&typeof o!=="boolean"&&typeof o!=="string"){return}var s=o.constructor.name;var a;switch(s){case"Array":var c=(i=(r=o[0])===null||r===void 0?void 0:r.constructor)===null||i===void 0?void 0:i.name;a=c==="Array"?o:c==="Object"?JSON.stringify(o):o.join(",");break;case"Object":a=JSON.stringify(o);break;case"Date":a=o.valueOf();break;case"Function":a=null;break;case"Boolean":a=o+"";break;default:a=o;break}if(a||a===0||typeof a==="string"||Array.isArray(a)){e[n]=a}}));return e}function j(t,e){if(Array.isArray(e)&&e[0]&&Array.isArray(e[0])){return e.map((function(e){return j(t,e)})).join("&")}return encodeURIComponent(t)+"="+encodeURIComponent(e)}function T(t){var e=x(t);return Object.keys(e).map((function(t){return j(t,e[t])})).join("&")}function N(t,e){var n=A(t)||e;var r=x(t);if(n){var i=new FormData;Object.keys(r).forEach((function(t){if(typeof Blob!=="undefined"&&r[t]instanceof Blob){var e=r["fileName"]||r[t].name||t;i.append(t,r[t],e)}else if(r[t].constructor&&r[t].constructor.name==="ReadStream"&&Number.isInteger(r["dataSize"])){i.append(t,r[t],{knownLength:r["dataSize"]})}else{i.append(t,r[t])}}));return i}else{return T(t)}}var R=function(){function t(t,e,n,r,i){t=t||"UNKNOWN_ERROR";e=e||"UNKNOWN_ERROR_CODE";this.name="ArcGISRequestError";this.message=e==="UNKNOWN_ERROR_CODE"?t:e+": "+t;this.originalMessage=t;this.code=e;this.response=n;this.url=r;this.options=i}return t}();R.prototype=Object.create(Error.prototype);R.prototype.constructor=R;function P(t){if(console&&console.warn){console.warn.apply(console,[t])}}var C="@esri/arcgis-rest-js";var I={httpMethod:"POST",params:{f:"json"}};var _=function(t){D(e,t);function e(e,n,r,i,o){if(e===void 0){e="AUTHENTICATION_ERROR"}if(n===void 0){n="AUTHENTICATION_ERROR_CODE"}var s=t.call(this,e,n,r,i,o)||this;s.name="ArcGISAuthError";s.message=n==="AUTHENTICATION_ERROR_CODE"?e:n+": "+e;return s}e.prototype.retry=function(t,e){var n=this;if(e===void 0){e=3}var r=0;var i=function(o,s){t(n.url,n.options).then((function(t){var e=E(E({},n.options),{authentication:t});r=r+1;return M(n.url,e)})).then((function(t){o(t)})).catch((function(t){if(t.name==="ArcGISAuthError"&&r<e){i(o,s)}else if(t.name==="ArcGISAuthError"&&r>=e){s(n)}else{s(t)}}))};return new Promise((function(t,e){i(t,e)}))};return e}(R);function q(t,e,n,r,i){if(t.code>=400){var o=t.message,s=t.code;throw new R(o,s,t,e,r)}if(t.error){var a=t.error,o=a.message,s=a.code,c=a.messageCode;var u=c||s||"UNKNOWN_ERROR_CODE";if(s===498||s===499||c==="GWM_0003"||s===400&&o==="Unable to generate token."){if(i){throw i}else{throw new _(o,u,t,e,r)}}throw new R(o,u,t,e,r)}if(t.status==="failed"||t.status==="failure"){var o=void 0;var s="UNKNOWN_ERROR_CODE";try{o=JSON.parse(t.statusMessage).message;s=JSON.parse(t.statusMessage).code}catch(e){o=t.statusMessage||t.message}throw new R(o,s,t,e,r)}return t}function M(t,e){if(e===void 0){e={params:{f:"json"}}}var n=E(E(E({httpMethod:"POST"},I),e),{params:E(E({},I.params),e.params),headers:E(E({},I.headers),e.headers)});var r=[];var i=[];if(!n.fetch&&typeof fetch!=="undefined"){n.fetch=fetch.bind(Function("return this")())}else{r.push("`fetch`");i.push("`node-fetch`")}if(typeof Promise==="undefined"){r.push("`Promise`");i.push("`es6-promise`")}if(typeof FormData==="undefined"){r.push("`FormData`");i.push("`isomorphic-form-data`")}if(!n.fetch||typeof Promise==="undefined"||typeof FormData==="undefined"){throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+r.join(", ")+". We recommend installing the "+i.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.")}var o=n.httpMethod,s=n.authentication,a=n.rawResponse;var c=E({f:"json"},n.params);var u=null;var l={method:o,credentials:n.credentials||"same-origin"};if(n.headers&&n.headers["X-Esri-Auth-Client-Id"]&&t.indexOf("/oauth2/platformSelf")>-1){l.credentials="include"}return(s?s.getToken(t,{fetch:n.fetch}).catch((function(e){e.url=t;e.options=n;u=e;return Promise.resolve("")})):Promise.resolve("")).then((function(e){if(e.length){c.token=e}if(s&&s.getDomainCredentials){l.credentials=s.getDomainCredentials(t)}var r={};if(l.method==="GET"){if(c.token&&n.hideToken&&typeof window==="undefined"){r["X-Esri-Authorization"]="Bearer "+c.token;delete c.token}var i=T(c);var o=i===""?t:t+"?"+T(c);if(n.maxUrlLength&&o.length>n.maxUrlLength||c.token&&n.hideToken){l.method="POST";if(e.length&&n.hideToken){c.token=e;delete r["X-Esri-Authorization"]}}else{t=o}}var a=new RegExp("/items/.+/updateResources").test(t);if(l.method==="POST"){l.body=N(c,a)}l.headers=E(E({},r),n.headers);if(typeof window==="undefined"&&!l.headers.referer){l.headers.referer=C}if(!A(c)&&!a){l.headers["Content-Type"]="application/x-www-form-urlencoded"}return n.fetch(t,l)})).then((function(e){if(!e.ok){var r=e.status,i=e.statusText;throw new R(i,"HTTP "+r,e,t,n)}if(a){return e}switch(c.f){case"json":return e.json();case"geojson":return e.json();case"html":return e.text();case"text":return e.text();default:return e.blob()}})).then((function(e){if((c.f==="json"||c.f==="geojson")&&!a){var r=q(e,t,c,n,u);if(u){var i=t.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];n.authentication.federatedServers[i]={token:[],expires:new Date(Date.now()+86400*1e3)};u=null}return r}else{return e}}))}function U(t,e,n){var r=["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"];var i=E(E({params:{}},n),t);i.params=e.reduce((function(e,n){if(t[n]||typeof t[n]==="boolean"){e[n]=t[n]}return e}),i.params);return r.reduce((function(t,e){if(i[e]){t[e]=i[e]}return t}),{})}function W(t){if(typeof t!=="string"){return t}t=t.trim();if(t[t.length-1]==="/"){t=t.slice(0,-1)}return t}function G(t){var e=t.split("="),n=e[0],r=e[1];return{key:decodeURIComponent(n),value:decodeURIComponent(r)}}function F(t){return t.replace(/^#/,"").split("&").reduce((function(t,e){var n=G(e),r=n.key,i=n.value;t[r]=i;return t}),{})}function L(t){if(t===void 0){t={}}if(t.portal){return W(t.portal)}if(t.authentication){return t.authentication.portal}return"https://www.arcgis.com/sharing/rest"}var H=/[\x00-\x1F\x7F-\x9F\xA0]/g;function J(t){return t.replace(H,"")}function K(t,e){var n=V(t,e);var r=E({httpMethod:"GET"},e);return M(n,r)}var V=function(t,e){var n=typeof e==="string"?e:L(e);return n+"/content/items/"+t};function B(t,e){var n=V(t,e)+"/data";var r=E({httpMethod:"GET",params:{}},e);if(r.file){r.params.f=null}return M(n,r).catch((function(t){var e=RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i);if(e.test(t.message)){return}else throw t}))}function z(t,e){var n=V(t,e)+"/groups";return M(n,e)}function Q(t,e){var n=e||{},r=n.fileName,i=r===void 0?"iteminfo.xml":r,o=n.readAs,s=o===void 0?"text":o;var a=E({httpMethod:"GET"},e);return X(t,"/info/"+i,s,a)}function Y(t,e){var n=E(E({},e),{fileName:"metadata/metadata.xml"});return Q(t,n)}function X(t,e,n,r){var i=""+V(t,r)+e;var o=E({params:{}},r);var s=o.rawResponse;o.rawResponse=true;o.params.f=null;return M(i,o).then((function(t){if(s){return t}return n!=="json"?t[n]():t.text().then((function(t){return JSON.parse(J(t))}))}))}function Z(t,e){var n=L(e)+"/community/groups/"+t+"/userlist";var r=U(e||{},["name","num","start","sortField","sortOrder","joined","memberType"],{httpMethod:"GET"});return M(n,r)}var tt=function(){function t(t){if(t===void 0){t=""}this.termStack=[];this.rangeStack=[];this.openGroups=0;this.q=t}t.prototype.match=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}this.termStack=this.termStack.concat(t);return this};t.prototype.in=function(t){var e="`in("+(t?'"'+t+'"':"")+")`";if(!this.hasRange&&!this.hasTerms){P(e+" was called with no call to `match(...)` or `from(...)`/`to(...)`. Your query was not modified.");return this}if(t&&t!=="*"){this.q+=t+":"}return this.commit()};t.prototype.startGroup=function(){this.commit();if(this.openGroups>0){this.q+=" "}this.openGroups++;this.q+="(";return this};t.prototype.endGroup=function(){if(this.openGroups<=0){P("`endGroup(...)` was called without calling `startGroup(...)` first. Your query was not modified.");return this}this.commit();this.openGroups--;this.q+=")";return this};t.prototype.and=function(){return this.addModifier("and")};t.prototype.or=function(){return this.addModifier("or")};t.prototype.not=function(){return this.addModifier("not")};t.prototype.from=function(t){if(this.hasTerms){P('`from(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Optionally, you may see this because dates are incorrectly formatted. Dates should be a primative Date value, aka a number in milliseconds or Date object, ie new Date("2020-01-01").  Your query was not modified.');return this}this.rangeStack[0]=t;return this};t.prototype.to=function(t){if(this.hasTerms){P('`to(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Optionally, you may see this because dates are incorrectly formatted. Dates should be a primative Date value, aka a number in milliseconds or Date object, ie new Date("2020-01-01"). Your query was not modified.');return this}this.rangeStack[1]=t;return this};t.prototype.boost=function(t){this.commit();this.q+="^"+t;return this};t.prototype.toParam=function(){this.commit();this.cleanup();return this.q};t.prototype.clone=function(){this.commit();this.cleanup();return new t(this.q+"")};t.prototype.addModifier=function(t){if(this.currentModifer){P("You have called `"+this.currentModifer+"()` after `"+t+"()`. Your current query was not modified.");return this}this.commit();if(this.q===""&&t!=="not"){P("You have called `"+t+"()` without calling another method to modify your query first. Try calling `match()` first.");return this}this.currentModifer=t;this.q+=this.q===""?"":" ";this.q+=t.toUpperCase()+" ";return this};t.prototype.needsQuotes=function(t){return/\s|:/g.test(t)};t.prototype.formatTerm=function(t){if(t instanceof Date){return t.getTime()}if(typeof t==="string"&&this.needsQuotes(t)){return'"'+t+'"'}return t};t.prototype.commit=function(){var t=this;this.currentModifer=undefined;if(this.hasRange){this.q+="["+this.formatTerm(this.rangeStack[0])+" TO "+this.formatTerm(this.rangeStack[1])+"]";this.rangeStack=[undefined,undefined]}if(this.hasTerms){this.q+=this.termStack.map((function(e){return t.formatTerm(e)})).join(" ");this.termStack=[]}return this};Object.defineProperty(t.prototype,"hasTerms",{get:function(){return this.termStack.length>0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"hasRange",{get:function(){return this.rangeStack.length&&this.rangeStack[0]&&this.rangeStack[1]},enumerable:false,configurable:true});t.prototype.cleanup=function(){if(this.openGroups>0){P("Automatically closing "+this.openGroups+" group(s). You can use `endGroup(...)` to remove this warning.");while(this.openGroups>0){this.q+=")";this.openGroups--}}var t=this.q;this.q=t.replace(/( AND ?| NOT ?| OR ?)*$/,"");if(t!==this.q){P("`startGroup(...)` was called without calling `endGroup(...)` first. Your query was not modified.")}this.q=this.q.replace(/(\(\))*/,"")};return t}();function et(t,e){var n;if(typeof t==="string"||t instanceof tt){n={httpMethod:"GET",params:{q:t}}}else{n=U(t,["q","num","start","sortField","sortOrder","searchUserAccess","searchUserName","filter","countFields","countSize","categories","categoryFilters"],{httpMethod:"GET"})}var r;switch(e){case"item":r="/search";break;case"group":r="/community/groups";break;case"groupContent":if(typeof t!=="string"&&!(t instanceof tt)&&t.groupId){r="/content/groups/"+t.groupId+"/search"}else{return Promise.reject(new Error("you must pass a `groupId` option to `searchGroupContent`"))}break;default:r="/portals/self/users/search";break}var i=L(n)+r;return M(i,n).then((function(n){if(n.nextStart&&n.nextStart!==-1){n.nextPage=function(){var r;if(typeof t==="string"||t instanceof tt){r={q:t,start:n.nextStart}}else{r=t;r.start=n.nextStart}return et(r,e)}}return n}))}function nt(t){return et(t,"item")}function rt(t){return et(t,"group")}function it(t){return et(t,"groupContent")}function ot(t){var e;var n={httpMethod:"GET"};if(typeof t==="string"){e="https://www.arcgis.com/sharing/rest/community/users/"+t}else{var r=t.username||t.authentication.username;e=L(t)+"/community/users/"+encodeURIComponent(r);n=E(E({},t),n)}return M(e,n)}function st(t){var e={httpMethod:"GET"};var n=encodeURIComponent(t.authentication.username);var r=L(t);var i=r+"/community/users/"+n+"/notifications";e=E(E({},t),e);return M(i,e)}function at(t){return et(t,"user")}function ct(t,e){var n=t?t:"self";var r=L(e)+"/portals/"+n;var i=E({httpMethod:"GET"},e);return M(r,i)}function ut(t,e){return e.split(".").reduce((function(t,e){return t?t[e]:undefined}),t)}function lt(t){let e={};if(Array.isArray(t)){e=t.map(lt)}else if(typeof t==="object"){for(const n in t){if(t.hasOwnProperty(n)){const r=t[n];if(r!=null&&typeof r==="object"){if(r instanceof Date){e[n]=new Date(r.getTime())}else if(typeof Blob!=="undefined"&&r instanceof Blob){e[n]=new Blob([r],{type:r.type})}else{e[n]=lt(r)}}else{e[n]=r}}}}else{e=t}return e}function dt(t="i"){return`${t}${Math.random().toString(36).substr(2,8)}`}function ft(t,e,n){return n.indexOf(t)===e}function pt(t,e,n={}){const r=e.split(".");let i=t;const o=r.length-1;r.forEach(((t,e)=>{if(!i.hasOwnProperty(t)||i[t]==null){if(e===o){i[t]=n}else{i[t]={}}}else if(e===o){if(typeof i[t]==="object"&&!Array.isArray(i[t])){i[t]=Object.assign(i[t],lt(n))}else{i[t]=n}}i=i[t]}))}function ht(t,e,n){const r=ut(t,e);return r!==undefined?r:n}function mt(t,e,n){if(Array.isArray(t)){t=t.join(".")}pt(n,t,e)}class gt extends Error{constructor(t,e,n){e=e||"UNKNOWN_ERROR";n=ht(n,"rootCause",n);super(e);this.operation=t;this.name="OperationError";this.rootCause=n;Object.setPrototypeOf(this,gt.prototype);this.stack=ht(n,"stack",(new Error).stack)}}const bt=t=>e=>t.reduce(((t,n)=>t.then(n).catch((t=>{if(t.name==="OperationError"){return Promise.reject(t)}else{const t=`IPipeableFn did not reject with an OperationError \n Operation Stack: \n ${e.stack.toString()}`;const n=new gt("pipeline execution error",t);n.operationStack=e.stack.serialize();return Promise.reject(n)}}))),Promise.resolve(e));function vt(t,e=[]){return e.map((e=>e[t]))}function wt(t,e){var n=e;n.rawResponse=false;return M(t,n).then((function(t){var e={token:t.access_token,username:t.username,expires:new Date(Date.now()+(t.expires_in*1e3-1e3)),ssl:t.ssl===true};if(t.refresh_token){e.refreshToken=t.refresh_token}return e}))}function yt(t,e){var n=e;if(typeof window!=="undefined"&&window.location&&window.location.host){n.params.referer=window.location.host}else{n.params.referer=C}return M(t,n)}var kt=/^https?:\/\/(\S+)\.arcgis\.com.+/;function Ot(t){return kt.test(t)}function St(t){if(!kt.test(t)){return t}switch(Dt(t)){case"dev":return"https://devext.arcgis.com/sharing/rest";case"qa":return"https://qaext.arcgis.com/sharing/rest";default:return"https://www.arcgis.com/sharing/rest"}}function Dt(t){if(!kt.test(t)){return null}var e=t.match(kt);var n=e[1].split(".").pop();if(n.includes("dev")){return"dev"}if(n.includes("qa")){return"qa"}return"production"}function Et(t,e){var n=W(St(e)).replace(/https?:\/\//,"");var r=W(t).replace(/https?:\/\//,"");return new RegExp(r,"i").test(n)}function $t(t,e){var n=Ot(t);var r=Ot(e);var i=Dt(t);var o=Dt(e);if(n&&r&&i===o){return true}return false}function At(t,e,n){if(n===void 0){n="https://www.arcgis.com/sharing/rest"}var r=n+"/oauth2/validateAppAccess";var i={method:"POST",params:{f:"json",client_id:e,token:t}};return M(r,i)}function xt(){var t={promise:null,resolve:null,reject:null};t.promise=new Promise((function(e,n){t.resolve=e;t.reject=n}));return t}var jt=function(){function t(t){this.clientId=t.clientId;this._refreshToken=t.refreshToken;this._refreshTokenExpires=t.refreshTokenExpires;this.username=t.username;this.password=t.password;this._token=t.token;this._tokenExpires=t.tokenExpires;this.portal=t.portal?W(t.portal):"https://www.arcgis.com/sharing/rest";this.ssl=t.ssl;this.provider=t.provider||"arcgis";this.tokenDuration=t.tokenDuration||20160;this.redirectUri=t.redirectUri;this.refreshTokenTTL=t.refreshTokenTTL||20160;this.server=t.server;this.federatedServers={};this.trustedDomains=[];if(t.server){var e=this.getServerRootUrl(t.server);this.federatedServers[e]={token:t.token,expires:t.tokenExpires}}this._pendingTokenRequests={}}Object.defineProperty(t.prototype,"token",{get:function(){return this._token},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"tokenExpires",{get:function(){return this._tokenExpires},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"refreshToken",{get:function(){return this._refreshToken},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"refreshTokenExpires",{get:function(){return this._refreshTokenExpires},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"trustedServers",{get:function(){console.log("DEPRECATED: use federatedServers instead");return this.federatedServers},enumerable:false,configurable:true});t.beginOAuth2=function(e,n){if(n===void 0){n=window}if(e.duration){console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead")}var r=E({portal:"https://www.arcgis.com/sharing/rest",provider:"arcgis",expiration:20160,popup:true,popupWindowFeatures:"height=400,width=600,menubar=no,location=yes,resizable=yes,scrollbars=yes,status=yes",state:e.clientId,locale:""},e),i=r.portal,o=r.provider,s=r.clientId,a=r.expiration,c=r.redirectUri,u=r.popup,l=r.popupWindowFeatures,d=r.state,f=r.locale,p=r.params;var h;if(o==="arcgis"){h=i+"/oauth2/authorize?client_id="+s+"&response_type=token&expiration="+(e.duration||a)+"&redirect_uri="+encodeURIComponent(c)+"&state="+d+"&locale="+f}else{h=i+"/oauth2/social/authorize?client_id="+s+"&socialLoginProviderName="+o+"&autoAccountCreateForSocial=true&response_type=token&expiration="+(e.duration||a)+"&redirect_uri="+encodeURIComponent(c)+"&state="+d+"&locale="+f}if(p){h=h+"&"+T(p)}if(!u){n.location.href=h;return undefined}var m=xt();n["__ESRI_REST_AUTH_HANDLER_"+s]=function(e,n){if(e){var r=JSON.parse(e);m.reject(new _(r.errorMessage,r.error));return}if(n){var o=JSON.parse(n);m.resolve(new t({clientId:s,portal:i,ssl:o.ssl,token:o.token,tokenExpires:new Date(o.expires),username:o.username}))}};n.open(h,"oauth-window",l);return m.promise};t.completeOAuth2=function(e,n){if(n===void 0){n=window}var r=E({portal:"https://www.arcgis.com/sharing/rest",popup:true},e),i=r.portal,o=r.clientId,s=r.popup;function a(e,r){try{var a=void 0;var c="__ESRI_REST_AUTH_HANDLER_"+o;if(s){if(n.opener){if(n.opener.parent&&n.opener.parent[c]){a=n.opener.parent[c]}else if(n.opener&&n.opener[c]){a=n.opener[c]}}else{if(n!==n.parent&&n.parent&&n.parent[c]){a=n.parent[c]}}if(a){a(e?JSON.stringify(e):undefined,JSON.stringify(r));n.close();return undefined}}}catch(t){throw new _('Unable to complete authentication. It\'s possible you specified popup based oAuth2 but no handler from "beginOAuth2()" present. This generally happens because the "popup" option differs between "beginOAuth2()" and "completeOAuth2()".')}if(e){throw new _(e.errorMessage,e.error)}return new t({clientId:o,portal:i,ssl:r.ssl,token:r.token,tokenExpires:r.expires,username:r.username})}var c=F(n.location.hash);if(!c.access_token){var u=void 0;var l="Unknown error";if(c.error){u=c.error;l=c.error_description}return a({error:u,errorMessage:l})}var d=c.access_token;var f=new Date(Date.now()+parseInt(c.expires_in,10)*1e3-60*1e3);var p=c.username;var h=c.ssl==="true";return a(undefined,{token:d,expires:f,ssl:h,username:p})};t.fromParent=function(e,n){if(!n&&window){n=window}var r;return new Promise((function(i,o){r=function(e){if(e.source===n.parent&&e.data){try{return i(t.parentMessageHandler(e))}catch(t){return o(t)}}};n.addEventListener("message",r,false);n.parent.postMessage({type:"arcgis:auth:requestCredential"},e)})).then((function(t){n.removeEventListener("message",r,false);return t}))};t.authorize=function(t,e){if(t.duration){console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead")}var n=E({portal:"https://arcgis.com/sharing/rest",expiration:20160},t),r=n.portal,i=n.clientId,o=n.expiration,s=n.redirectUri;e.writeHead(301,{Location:r+"/oauth2/authorize?client_id="+i+"&expiration="+(t.duration||o)+"&response_type=code&redirect_uri="+encodeURIComponent(s)});e.end()};t.exchangeAuthorizationCode=function(e,n){var r=E({portal:"https://www.arcgis.com/sharing/rest",refreshTokenTTL:20160},e),i=r.portal,o=r.clientId,s=r.redirectUri,a=r.refreshTokenTTL;return wt(i+"/oauth2/token",{params:{grant_type:"authorization_code",client_id:o,redirect_uri:s,code:n}}).then((function(e){return new t({clientId:o,portal:i,ssl:e.ssl,redirectUri:s,refreshToken:e.refreshToken,refreshTokenTTL:a,refreshTokenExpires:new Date(Date.now()+(a-1)*60*1e3),token:e.token,tokenExpires:e.expires,username:e.username})}))};t.deserialize=function(e){var n=JSON.parse(e);return new t({clientId:n.clientId,refreshToken:n.refreshToken,refreshTokenExpires:new Date(n.refreshTokenExpires),username:n.username,password:n.password,token:n.token,tokenExpires:new Date(n.tokenExpires),portal:n.portal,ssl:n.ssl,tokenDuration:n.tokenDuration,redirectUri:n.redirectUri,refreshTokenTTL:n.refreshTokenTTL})};t.fromCredential=function(e){var n=typeof e.ssl!=="undefined"?e.ssl:true;var r=e.expires||Date.now()+72e5;return new t({portal:e.server.includes("sharing/rest")?e.server:e.server+"/sharing/rest",ssl:n,token:e.token,username:e.userId,tokenExpires:new Date(r)})};t.parentMessageHandler=function(e){if(e.data.type==="arcgis:auth:credential"){return t.fromCredential(e.data.credential)}if(e.data.type==="arcgis:auth:error"){var n=new Error(e.data.error.message);n.name=e.data.error.name;throw n}else{throw new Error("Unknown message type.")}};t.prototype.toCredential=function(){return{expires:this.tokenExpires.getTime(),server:this.portal,ssl:this.ssl,token:this.token,userId:this.username}};t.prototype.getUser=function(t){var e=this;if(this._pendingUserRequest){return this._pendingUserRequest}else if(this._user){return Promise.resolve(this._user)}else{var n=this.portal+"/community/self";var r=E(E({httpMethod:"GET",authentication:this},t),{rawResponse:false});this._pendingUserRequest=M(n,r).then((function(t){e._user=t;e._pendingUserRequest=null;return t}));return this._pendingUserRequest}};t.prototype.getPortal=function(t){var e=this;if(this._pendingPortalRequest){return this._pendingPortalRequest}else if(this._portalInfo){return Promise.resolve(this._portalInfo)}else{var n=this.portal+"/portals/self";var r=E(E({httpMethod:"GET",authentication:this},t),{rawResponse:false});this._pendingPortalRequest=M(n,r).then((function(t){e._portalInfo=t;e._pendingPortalRequest=null;return t}));return this._pendingPortalRequest}};t.prototype.getUsername=function(){if(this.username){return Promise.resolve(this.username)}else if(this._user){return Promise.resolve(this._user.username)}else{return this.getUser().then((function(t){return t.username}))}};t.prototype.getToken=function(t,e){if($t(this.portal,t)){return this.getFreshToken(e)}else if(new RegExp(this.portal,"i").test(t)){return this.getFreshToken(e)}else{return this.getTokenForServer(t,e)}};t.prototype.validateAppAccess=function(t){return this.getToken(this.portal).then((function(e){return At(e,t)}))};t.prototype.toJSON=function(){return{clientId:this.clientId,refreshToken:this.refreshToken,refreshTokenExpires:this.refreshTokenExpires,username:this.username,password:this.password,token:this.token,tokenExpires:this.tokenExpires,portal:this.portal,ssl:this.ssl,tokenDuration:this.tokenDuration,redirectUri:this.redirectUri,refreshTokenTTL:this.refreshTokenTTL}};t.prototype.serialize=function(){return JSON.stringify(this)};t.prototype.enablePostMessageAuth=function(t,e){if(!e&&window){e=window}this._hostHandler=this.createPostMessageHandler(t);e.addEventListener("message",this._hostHandler,false)};t.prototype.disablePostMessageAuth=function(t){if(!t&&window){t=window}t.removeEventListener("message",this._hostHandler,false)};t.prototype.refreshSession=function(t){this._user=null;if(this.username&&this.password){return this.refreshWithUsernameAndPassword(t)}if(this.clientId&&this.refreshToken){return this.refreshWithRefreshToken()}return Promise.reject(new _("Unable to refresh token."))};t.prototype.getServerRootUrl=function(t){var e=W(t).split(/\/rest(\/admin)?\/services(?:\/|#|\?|$)/)[0];var n=e.match(/(https?:\/\/)(.+)/),r=n[1],i=n[2];var o=i.split("/"),s=o[0],a=o.slice(1);return""+r+s.toLowerCase()+"/"+a.join("/")};t.prototype.getDomainCredentials=function(t){if(!this.trustedDomains||!this.trustedDomains.length){return"same-origin"}return this.trustedDomains.some((function(e){return t.startsWith(e)}))?"include":"same-origin"};t.prototype.createPostMessageHandler=function(t){var e=this;return function(n){var r=t.indexOf(n.origin)>-1;var i=n.data.type==="arcgis:auth:requestCredential";var o=e.tokenExpires.getTime()>Date.now();if(r&&i){var s={};if(o){var a=e.toCredential();a.server=a.server.replace("/sharing/rest","");s={type:"arcgis:auth:credential",credential:a}}else{s={type:"arcgis:auth:error",error:{name:"tokenExpiredError",message:"Session token was expired, and not returned to the child application"}}}n.source.postMessage(s,n.origin)}}};t.prototype.getTokenForServer=function(t,e){var n=this;var r=this.getServerRootUrl(t);var i=this.federatedServers[r];if(i&&i.expires&&i.expires.getTime()>Date.now()){return Promise.resolve(i.token)}if(this._pendingTokenRequests[r]){return this._pendingTokenRequests[r]}this._pendingTokenRequests[r]=this.fetchAuthorizedDomains().then((function(){return M(r+"/rest/info",{credentials:n.getDomainCredentials(t)}).then((function(i){if(i.owningSystemUrl){if(!Et(i.owningSystemUrl,n.portal)){throw new _(t+" is not federated with "+n.portal+".","NOT_FEDERATED")}else{return M(i.owningSystemUrl+"/sharing/rest/info",e)}}else if(i.authInfo&&n.federatedServers[r]!==undefined){return Promise.resolve({authInfo:i.authInfo})}else{throw new _(t+" is not federated with any portal and is not explicitly trusted.","NOT_FEDERATED")}})).then((function(t){return t.authInfo.tokenServicesUrl})).then((function(e){if(n.token&&n.tokenExpires.getTime()>Date.now()){return yt(e,{params:{token:n.token,serverUrl:t,expiration:n.tokenDuration,client:"referer"}})}else{return yt(e,{params:{username:n.username,password:n.password,expiration:n.tokenDuration,client:"referer"}}).then((function(t){n._token=t.token;n._tokenExpires=new Date(t.expires);return t}))}})).then((function(t){n.federatedServers[r]={expires:new Date(t.expires),token:t.token};delete n._pendingTokenRequests[r];return t.token}))}));return this._pendingTokenRequests[r]};t.prototype.getFreshToken=function(t){var e=this;if(this.token&&!this.tokenExpires){return Promise.resolve(this.token)}if(this.token&&this.tokenExpires&&this.tokenExpires.getTime()>Date.now()){return Promise.resolve(this.token)}if(!this._pendingTokenRequests[this.portal]){this._pendingTokenRequests[this.portal]=this.refreshSession(t).then((function(t){e._pendingTokenRequests[e.portal]=null;return t.token}))}return this._pendingTokenRequests[this.portal]};t.prototype.refreshWithUsernameAndPassword=function(t){var e=this;var n=E({params:{username:this.username,password:this.password,expiration:this.tokenDuration}},t);return yt(this.portal+"/generateToken",n).then((function(t){e._token=t.token;e._tokenExpires=new Date(t.expires);return e}))};t.prototype.refreshWithRefreshToken=function(t){var e=this;if(this.refreshToken&&this.refreshTokenExpires&&this.refreshTokenExpires.getTime()<Date.now()){return this.refreshRefreshToken(t)}var n=E({params:{client_id:this.clientId,refresh_token:this.refreshToken,grant_type:"refresh_token"}},t);return wt(this.portal+"/oauth2/token",n).then((function(t){e._token=t.token;e._tokenExpires=t.expires;return e}))};t.prototype.refreshRefreshToken=function(t){var e=this;var n=E({params:{client_id:this.clientId,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,grant_type:"exchange_refresh_token"}},t);return wt(this.portal+"/oauth2/token",n).then((function(t){e._token=t.token;e._tokenExpires=t.expires;e._refreshToken=t.refreshToken;e._refreshTokenExpires=new Date(Date.now()+(e.refreshTokenTTL-1)*60*1e3);return e}))};t.prototype.fetchAuthorizedDomains=function(){var t=this;if(this.server||!this.portal){return Promise.resolve(this)}return this.getPortal().then((function(e){if(e.authorizedCrossOriginDomains&&e.authorizedCrossOriginDomains.length){t.trustedDomains=e.authorizedCrossOriginDomains.filter((function(t){return!t.startsWith("http://")})).map((function(t){if(t.startsWith("https://")){return t}else{return"https://"+t}}))}return t}))};return t}();function Tt(t){const{host:e,path:n,query:r}=t;const i=e.endsWith("/")?e:`${e}/`;const o=new URL(n,i);o.search=Nt(r);return o.toString()}function Nt(t={}){const e=Object.keys(t).filter((e=>t[e]!==undefined)).reduce(((e,n)=>{e[n]=t[n];return e}),{});return new URLSearchParams(e).toString()}function Rt(t){if(typeof t==="string"){return t.replace(/\/sharing\/rest\/?$/,"")}if(typeof t==="object"){const e=t.portalSelf;const n=e||t;const{portalHostname:r,urlKey:i,customBaseUrl:o}=n;if(r||i&&o){if(n.isPortal){return`https://${n.portalHostname}`}else{return`https://${n.urlKey}.${n.customBaseUrl}`}}}return Rt(L(t))}function Pt(t){return`${Rt(t)}/sharing/rest`}function Ct(t,e){const n=Rt(e);return`${n}/home/item.html?id=${t}`}const It=(t,e,n)=>{const{id:r,access:i}=t;const o=`${Pt(e)}/content/items/${r}`;const s=new URLSearchParams({f:"json"});if(i!=="public"&&n){s.append("token",n)}return`${o}?${s.toString()}`};function _t(t){let e=t;if(t.match(/(qaext|\.mapsqa)\.arcgis.com/)){e="https://qaext.arcgis.com"}else if(t.match(/(devext|\.mapsdevext)\.arcgis.com/)){e="https://devext.arcgis.com"}else{if(t.match(/(www|\.maps)\.arcgis.com/)){e="https://www.arcgis.com"}}return e}function qt(t,e){const n=Rt(e);return`${n}/home/group.html?id=${t}`}function Mt(t,e){const n=Rt(e);return`${n}/home/user.html?user=${t}`}const Ut=["Application","City Engine Web Scene","CityEngine Web Scene","Dashboard","Insights Page","Insights Workbook","Operation View","Web Mapping Application","StoryMap","Web Experience","Urban Model"];const Wt=["CSV Collection","CSV","Feature Collection Template","Feature Collection","Feature Layer","Feature Service","File Geodatabase","GeoJSON","GeoJson","KML Collection","KML","Microsoft Excel","Raster Layer","Shapefile","Stream Service","Table"];const Gt=["CAD Drawing","Document Link","Hub Page","Site Page","Image","iWork Keynote","iWork Numbers","iWork Pages","Microsoft Powerpoint","Microsoft Visio","Microsoft Word","Notebook","PDF","Pro Map","Report Template"];const Ft=["Hub Event"];const Lt=["Form","Quick Capture Project"];const Ht=["Hub Initiative"];const Jt=["Solution"];const Kt=["Hub Initiative Template"];const Vt=["Image Collection","Image Service","Map Service Layer","Map Service","Scene Service","Scene Layer","Vector Tile Service","Web Map Service","Web Map Tile Service","Web Map","Web Scene","WFS","WMS","WMTS"];const Bt=["360 VR Experience","AppBuilder Widget Package","Application Configuration","ArcPad Package","Code Attachment","Code Sample","Desktop Add In","Desktop Application Template","Desktop Application","Desktop Style","Explorer Add In","Explorer Layer","Geocoding Service","Geometry Service","Geoprocessing Package","Geoprocessing Sample","Geoprocessing Service","Layer File","Layer Package","Layer Template","Layer","Layout","Locator Package","Map Area","Map Document","Map Package","Map Service Definition","Map Template","Mobile Application","Mobile Map Package","Native Application","Network Analysis Service","Operations Dashboard Add In","Project Package","Project Template","Raster Function Template","Rule Package","Scene Package","Service Definition","SQLite Geodatabase","Style","Tile Package","Vector Tile Package","Workflow Manager Package"];const zt=["Hub Site Application","Site Application"];const Qt=t=>{if(!t){return}const e=t.toLocaleLowerCase();return Object.keys(Yt).find((t=>{const n=Yt[t];return n.some((t=>t.toLocaleLowerCase()===e))}))};const Yt={app:Ut,dataset:Wt,document:Gt,event:Ft,feedback:Lt,initiative:Ht,template:Kt,solution:Jt,map:Vt,other:Bt,site:zt};function Xt(t){var e=U(t,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:E({where:"1=1",outFields:"*"},t.params)});return M(W(t.url)+"/query",e)}var Zt=new RegExp(/.+(?:map|feature|image)server/i);function te(t){var e=t.match(Zt);if(e){return e[0]}else{return ee(t)}}function ee(t){var e=t.split("?")[0];return W(e)}function ne(t){var e=t.url,n=$(t,["url"]);var r=te(e)+"/layers";return M(r,n)}function re(t){return M(W(t.url),t)}class ie extends gt{constructor(t,e,n){e=e||"UNKNOWN_ERROR";n=ht(n,"rootCause",n);super(t,e,n);this.name="HubError";this.stack=ht(n,"stack",(new Error).stack)}}function oe(t,e,n){if(!t||!t.thumbnail){return null}let{token:r,width:i}=n||{};if(!r&&typeof n==="string"){r=n}const o=It(t,e,r);const[s,a]=o.split("?");const c=new URLSearchParams(a);c.delete("f");if(i){c.append("w",i+"")}const u=c.toString();const l=`${s}/info/${t.thumbnail}`;return u?`${l}?${u}`:l}function se(t){const e=t.split(" AS ");const n=e[0];const r=e[1]||n.split(".").reverse()[0];const i=n.split(".")[0];const o={enrichment:i,path:n,prop:r};return o}class ae{constructor(){this.operations=[]}startOperation(t){const e=lt(t);e.startedAt=(new Date).getTime();e.state="working";this.operations.push(e)}start(t,e){const n={type:t,id:ht(e,"id",dt(`${t}_`)),inputs:ht(e,"inputs",{}),cleanup:ht(e,"cleanup","n/a"),startedAt:(new Date).getTime(),state:"working"};this.operations.push(n);return n.id}getOperation(t){return this.operations.find((e=>e.id===t))}getOperations(){return this.operations}finish(t,e){const n=this.getOperation(t);if(n){n.duration=(new Date).getTime()-n.startedAt;n.state="completed";if(e){n.output=lt(e)}}else{throw new Error(`No operation with id ${t} present in stack`)}}merge(t){this.operations=[...this.operations,...t.operations]}getCompleted(){return lt(this.operations.filter((t=>t.state==="completed")))}getWorking(){return lt(this.operations.filter((t=>t.state==="working")))}toString(){const t=this.operations.sort(((t,e)=>{if(t.startedAt<e.startedAt){return-1}if(e.startedAt<t.startedAt){return 1}return 0}));return t.map(ce).join("\n")}serialize(){return{operations:lt(this.getOperations())}}}function ce(t){let e=`${t.startedAt} : Operation ${t.id} started with inputs ${JSON.stringify(t.inputs)} but was not completed`;if(t.state==="completed"){e=`${t.startedAt} : Operation ${t.id} took ${t.duration} ms with inputs ${JSON.stringify(t.inputs)} and output ${t.output?JSON.stringify(t.output):"n/a"}`}return e}function ue(t,e){const n=ut(e,"portal")||ut(e,"authentication.portal")||"www.arcgis.com";const r=`${_t(n)}/sharing/rest`;return ct(t,Object.assign(Object.assign({},e),{portal:r}))}async function le(t){const{parse:e}=await import("./p-d54d09a0.js").then((function(t){return t.p}));const n={ignoreAttributes:false,attributeNamePrefix:"@_",textNodeName:"#value"};return e(t,n)}async function de(t,e){try{const n=await Y(t,e);return await le(n)}catch(t){return null}}const fe=t=>{const{data:e,stack:n,requestOptions:r}=t;const i=n.start("enrichGroupIds");return z(e.item.id,r).then((t=>{const{admin:o,member:s,other:a}=t;const c=[...o,...s,...a].map((t=>t.id));n.finish(i);return{data:Object.assign(Object.assign({},e),{groupIds:c}),stack:n,requestOptions:r}})).catch((e=>we(e,t,i)))};const pe=t=>{const{data:e,stack:n,requestOptions:r}=t;const i=n.start("enrichMetadata");return de(e.item.id,r).then((t=>{n.finish(i);return{data:Object.assign(Object.assign({},e),{metadata:t}),stack:n,requestOptions:r}}))};const he=t=>{const{data:e,stack:n,requestOptions:r}=t;const i=n.start("enrichOwner");const o=Object.assign({username:e.item.owner},r);return ot(o).then((t=>{n.finish(i);return{data:Object.assign(Object.assign({},e),{ownerUser:t}),stack:n,requestOptions:r}})).catch((e=>we(e,t,i)))};const me=t=>{const{data:e,stack:n,requestOptions:r}=t;const i=n.start("enrichOrg");const o=Re(e.item,e.ownerUser);const s=o?ue(o,r):Promise.resolve(undefined);return s.then((t=>{n.finish(i);return{data:Object.assign(Object.assign({},e),{org:t}),stack:n,requestOptions:r}})).catch((e=>we(e,t,i)))};const ge=t=>{const{data:e,stack:n,requestOptions:r}=t;const i=n.start("enrichData");return B(e.item.id,r).then((t=>{n.finish(i);return{data:Object.assign(Object.assign({},e),{data:t}),stack:n,requestOptions:r}})).catch((e=>we(e,t,i)))};const be=t=>{const{data:e,stack:n,requestOptions:r}=t;const i=n.start("enrichServer");const o=te(e.item.url);const s=Object.assign(Object.assign({},r),{url:o});return re(s).then((t=>{n.finish(i);return{data:Object.assign(Object.assign({},e),{server:t}),stack:n,requestOptions:r}})).catch((e=>we(e,t,i)))};const ve=t=>{const{data:e,stack:n,requestOptions:r}=t;const i=n.start("enrichLayers");const o=e.item.url;const s=Object.assign(Object.assign({},r),{url:o});return ne(s).then((t=>{const e=[...t.layers,...t.tables];return e.filter((t=>t.type!=="Group Layer"))})).then((t=>{n.finish(i);return{data:Object.assign(Object.assign({},e),{layers:t}),stack:n,requestOptions:r}})).catch((e=>we(e,t,i)))};const we=(t,e,n)=>{const{data:r,stack:i,requestOptions:o}=e;i.finish(n,{error:t});return{data:Object.assign(Object.assign({},r),{errors:ke(t,r.errors)}),stack:i,requestOptions:o}};const ye={groupIds:fe,metadata:pe,ownerUser:he,org:me,data:ge,server:be,layers:ve};const ke=(t,e=[])=>{const n=typeof t==="string"?t:t.message;return[...e,{type:"Other",message:n}]};const Oe=(t,e,n)=>{const r=e.reduce(((t,e)=>{const n=ye[e];n&&t.push(n);return t}),[]);const i=bt(r);return i({data:{item:t},stack:new ae,requestOptions:n}).then((t=>t.data))};function Se(t){const e={other:"content",solution:"template"};return e[t]||t}function De(t){let e;switch(t.toLowerCase()){case"image service":e="dataset";break;case"feature service":case"raster layer":e="map";break;case"microsoft excel":e="document";break;case"cad drawing":case"feature collection template":case"report template":e="content";break;case"hub project":e="project";break;default:e=Se(Qt(t))}return e}async function Ee(t,e,n){const r={access:t.access,id:t.id,type:t.type,name:t.title,owner:t.owner,typeKeywords:t.typeKeywords,tags:t.tags,categories:t.categories,summary:t.snippet||t.description,createdDate:new Date(t.created),createdDateSource:"item.created",updatedDate:new Date(t.modified),updatedDateSource:"item.modified",family:De(t.type),links:{self:"not-implemented",siteRelative:"not-implemented",thumbnail:"not-implemented"}};const i=[];e=[...i,...e].filter(ft);const o=e.map(se);const s=vt("enrichment",o).filter(ft);let a={};if(s.length){a=await Oe(t,s,n)}o.forEach((t=>{r[t.prop]=ut(a,t.path)}));r.links.thumbnail=oe(t,n);r.links.self=Ct(r.id,n);r.links.siteRelative=Ae(r.type,r.id,t.typeKeywords);return r}async function $e(t,e,n){const r={access:t.access,id:t.id,type:t.type,name:t.title,owner:t.owner,typeKeywords:t.typeKeywords,tags:t.tags,categories:t.categories,summary:t.snippet||t.description,createdDate:new Date(t.created),createdDateSource:"item.created",updatedDate:new Date(t.modified),updatedDateSource:"item.modified",family:De(t.type),links:{self:"not-implemented",siteRelative:"not-implemented",thumbnail:"not-implemented"}};const i=[];e=[...i,...e].filter(ft);const o=e.map(se);const s=vt("enrichment",o).filter(ft);let a={};if(s.length){a=await Oe(t,s,n)}o.forEach((t=>{r[t.prop]=ut(a,t.path)}));r.links.thumbnail=oe(t,n);r.links.self=t.url;r.links.siteRelative=Ae(r.type,r.id,t.typeKeywords);return r}const Ae=(t,e,n)=>{let r=je(t,e,n)||Te(t,e,n);if(!r){const i=De(t);const o=["app","dataset","document","map","template","project"];let s="/content";if(i==="feedback"){s="/feedback/surveys"}else if(xe(t,n)){s="/pages"}else if(o.indexOf(i)>-1){s=`/${i}s`}r=`${s}/${e}`}return r};const xe=(t,e=[])=>["Hub Page","Site Page"].includes(t)||e.includes("hubPage");const je=(t,e,n)=>{let r;if(t==="Solution"){if((n===null||n===void 0?void 0:n.indexOf("Deployed"))>-1){r=`/content/${e}/about`}else{r=`/templates/${e}/about`}}else if(t==="Web Mapping Application"&&(n===null||n===void 0?void 0:n.indexOf("hubSolutionTemplate"))>-1){r=`/templates/${e}/about`}return r};const Te=(t,e,n)=>{if(t==="Hub Initiative"&&(n===null||n===void 0?void 0:n.indexOf("hubInitiativeTemplate"))>-1||t==="Hub Initiative Template"){return`/initiatives/templates/${e}/about`}};var Ne;(function(t){t["Year"]="year";t["Month"]="month";t["Day"]="day";t["Time"]="time"})(Ne||(Ne={}));const Re=(t,e)=>t.orgId||(e===null||e===void 0?void 0:e.orgId);class Pe extends Error{constructor(t,e,n){super(t);this.status=n;this.url=e}}async function Ce(t,e,n){const r={access:t.access,id:t.id,type:t.type,name:t.title,owner:t.owner,tags:t.tags,typeKeywords:t.typeKeywords,categories:t.categories,summary:t.snippet||t.description,createdDate:new Date(t.created),createdDateSource:"item.created",updatedDate:new Date(t.modified),updatedDateSource:"item.modified",family:De(t.type),links:{self:"not-implemented",siteRelative:"not-implemented",thumbnail:"not-implemented"}};const i=[];e=[...i,...e].filter(ft);const o=e.map(se);const s=vt("enrichment",o).filter(ft);let a={};if(s.length){a=await Oe(t,s,n)}o.forEach((t=>{r[t.prop]=ut(a,t.path)}));r.links.thumbnail=oe(t,n);r.links.self=Ct(r.id,n);r.links.siteRelative=Ae(r.type,r.id,t.typeKeywords);return r}const Ie=t=>{const{data:e,stack:n,requestOptions:r}=t;const i=n.start("enrichGroupContentCount");const o=Object.assign({groupId:e.group.id,num:1},r);return it(o).then((t=>{n.finish(i);return{data:Object.assign(Object.assign({},e),{contentCount:t.total}),stack:n,requestOptions:r}})).catch((e=>qe(e,t,i)))};const _e=t=>{const{data:e,stack:n,requestOptions:r}=t;const i=n.start("enrichGroupContentCount");const o=Object.assign({num:3},r);return Z(e.group.id,o).then((t=>{n.finish(i);return{data:Object.assign(Object.assign({},e),{membershipSummary:{total:t.total,users:t.users}}),stack:n,requestOptions:r}})).catch((e=>qe(e,t,i)))};const qe=(t,e,n)=>{const{data:r,stack:i,requestOptions:o}=e;i.finish(n,{error:t});return{data:Object.assign(Object.assign({},r),{errors:ke(t,r.errors)}),stack:i,requestOptions:o}};const Me={membershipSummary:_e,contentCount:Ie};function Ue(t,e,n){const r=e.reduce(((t,e)=>{const n=Me[e];n&&t.push(n);return t}),[]);const i=bt(r);return i({data:{group:t},stack:new ae,requestOptions:n}).then((t=>t.data))}const We={arcgis:{label:"ArcGIS Online",url:"https://www.arcgis.com",type:"arcgis"},arcgisQA:{label:"ArcGIS Online QAEXT",url:"https://qaext.arcgis.com",type:"arcgis"},arcgisDEV:{label:"ArcGIS Online DEVEXT",url:"https://devext.arcgis.com",type:"arcgis"},hub:{label:"ArcGIS Hub",url:"https://hub.arcgis.com/api",type:"arcgis-hub"},hubDEV:{label:"ArcGIS Hub DEV",url:"https://hubdev.arcgis.com/api",type:"arcgis-hub"},hubQA:{label:"ArcGIS Hub QA",url:"https://hubqa.arcgis.com/api",type:"arcgis-hub"}};function Ge(t){if(typeof t==="string"&&t in We){return We[t]}else{return t}}function Fe(t){let e={};if(Array.isArray(t)){e={any:t}}else{if(typeof t==="string"){e={any:[t]}}if(typeof t==="object"){e=t}}return e}function Le(t){const e={min:1e3*60,hours:1e3*60*60,days:1e3*60*60*24,weeks:1e3*60*60*24*7};const n=new Date;const r={type:"date-range",from:n.getTime(),to:n.getTime()};switch(t.unit){case"hours":case"days":case"weeks":r.from=r.to-e[t.unit]*t.num;break;case"months":n.setMonth(n.getMonth()-t.num);r.from=n.getTime();break;case"years":n.setFullYear(n.getFullYear()-t.num);r.from=n.getTime();break}return r}function He(t,e,n,r){const i=lt(t);if(t.authentication){i.authentication=jt.deserialize(t.authentication.serialize())}i.start=e>-1?e:n+1;return t=>{if(t){i.authentication=t}return r(i)}}function Je(t,e,n){let r=null;if(e.thumbnail){r=`${t}/community/groups/${e.id}/info/${e.thumbnail}`;if(n&&e.access!=="public"){r=`${r}?token=${n}`}}return r}function Ke(t,e,n){let r=null;if(e.thumbnail){r=`${t}/community/users/${e.username}/info/${e.thumbnail}`;if(n&&e.access!=="public"){r=`${r}?token=${n}`}}return r}function Ve(t){const e={};const n=["created","modified","lastlogin"];const r=["filterType","categoriesAsParam","categoryFilter","term","searchUserAccess","isopendata","searchUserName"];const i=[...n,...r];Object.entries(t).forEach((([o,s])=>{if(!i.includes(o)){mt(o,Fe(s),e)}if(n.includes(o)){const n=lt(ut(t,o));if(ut(t,`${o}.type`)==="relative-date"){mt(o,Le(n),e)}else{mt(o,n,e)}}if(r.includes(o)&&t.hasOwnProperty(o)){mt(o,s,e)}}));return e}function Be(t){const e=t.filters.map(Ye);const n=e.filter(ze);const r=Qe(n,"AND");return r}function ze(t){return!(typeof t==="undefined"||t===null||t==="")}function Qe(t,e){const n=t.reduce(((t,n)=>{Object.entries(n).forEach((([n,r])=>{if(t[n]&&r!==""){t[n]=`${t[n]} ${e} ${r}`}else{if(r!==""){t[n]=r}}}));return t}),{q:""});return n}function Ye(t){const e=t.operation||"AND";const n=t.predicates.map(Ve);const r=n.map(Xe).filter((t=>t!==undefined&&t!==null));const i=Qe(r,e);if(n.length>1){i.q=`(${i.q})`}return i}function Xe(t){const e=["created","modified"];const n=["isopendata"];const r=["searchUserAccess","searchUserName","categoriesAsParam","categoryFilter"];const i=["filterType","term",...e,...n,...r];const o=["access","capabilities","created","categories","categoriesAsParam","categoryFilter","description","disabled","email","emailstatus","firstname","fullname","group","id","isInvitationOnly","isopendata","joined","lastlogin","lastname","memberType","modified","name","orgid","orgIds","owner","provider","role","searchUserAccess","searchUserName","snippet","tags","term","title","type","typekeywords","userlicensetype","username"];const s=Object.entries(t).map((([t,s])=>{if(o.includes(t)){const o={q:""};if(!i.includes(t)&&t!=="term"){o.q=Ze(t,s)}if(e.includes(t)){o.q=tn(t,s)}if(n.includes(t)){o.q=`${t}:${s}`}if(r.includes(t)){o[t]=s}if(t==="term"){o.q=s}return o}})).filter(ze);if(s.length){const t=Qe(s,"AND");if(t.q){t.q=`(${t.q})`}return t}else{return null}}function Ze(t,e){let n="";if(e.any){n=`${en("OR",t,e.any)}`}if(e.all){n=(n?n+" AND ":"")+`${en("AND",t,e.all)}`}if(e.not){n=(n?n+" AND ":"")+`${en("OR",`-${t}`,e.not)}`}return n}function tn(t,e){return`${t}:[${e.from} TO ${e.to}]`}function en(t,e,n){let r="";if(Array.isArray(n)){r=`${e}:"${n.join(`" ${t} ${e}:"`)}"`;if(n.length>1){r=`(${r})`}}else{r=`${e}:"${n}"`}return r}async function nn(t,e,n){const r={access:t.access,id:t.id,type:t.type,name:t.title,owner:t.owner,typeKeywords:t.typeKeywords,tags:t.tags,categories:t.categories,summary:t.snippet||t.description,createdDate:new Date(t.created),createdDateSource:"item.created",updatedDate:new Date(t.modified),updatedDateSource:"item.modified",family:De(t.type),links:{self:"not-implemented",siteRelative:"not-implemented",thumbnail:"not-implemented"}};const i=[];e=[...i,...e].filter(ft);const o=e.map(se);const s=vt("enrichment",o).filter(ft);let a={};if(s.length){a=await Oe(t,s,n)}o.forEach((t=>{r[t.prop]=ut(a,t.path)}));r.links.thumbnail=oe(t,n);r.links.self=Ct(r.id,n);r.links.siteRelative=Ae(r.type,r.id,t.typeKeywords);return r}function rn(t){var e;if((e=t.aggregations)===null||e===void 0?void 0:e.counts){return t.aggregations.counts.map((t=>({mode:"terms",field:t.fieldName,values:t.fieldValues})))}else{return[]}}async function on(t,e){var n;if(!e.requestOptions){throw new ie("portalSearchItems","options.requestOptions is required.")}const r=un(t);r.filters=r.filters.map((t=>{t.predicates=t.predicates.map(Ve);return t}));const i=Be(r);const o=["num","sortField","sortOrder","include","start","requestOptions"];o.forEach((t=>{if(e.hasOwnProperty(t)){i[t]=e[t]}}));if(e.requestOptions.authentication){i.authentication=e.requestOptions.authentication}else{i.portal=e.requestOptions.portal}if((n=e.aggFields)===null||n===void 0?void 0:n.length){i.countFields=e.aggFields.join(",");i.countSize=e.aggLimit||10}return sn(i)}async function sn(t){const e=await nt(t);const n=e=>an(e,t.includes,t.requestOptions);const r=await Promise.all(e.results.map(n));const i=rn(e);return{total:e.total,results:r,aggregations:i,hasNext:e.nextStart>-1,next:He(t,e.nextStart,e.total,sn)}}async function an(t,e=[],n){let r=Ce;switch(t.type){case"Hub Site Application":case"Site Application":r=$e;break;case"Hub Page":case"Site Page":r=nn;break;case"Hub Project":r=Ee;break;case"Web Mapping Application":if(t.typeKeywords.includes("hubSite")){r=$e}break}return r(t,e,n)}const cn={$application:[{type:{any:["Web Mapping Application","Application","Insights","Web Experience"],not:["Insights Theme","Insights Model"]},typekeywords:{not:["hubSite","Story Map"]}},{type:"Web Mapping Experience",typekeywords:"EXB Experience"}],$dashboard:[{type:{any:["Dashboard"],not:["Operation View"]},typekeywords:{not:["Extension","ArcGIS Operation View"]}}],$dataset:[{type:{any:["Scene Service","Feature Collection","Route Layer","Layer","Explorer Layer","Tile Package","Vector Tile Package","Scene Package","Layer Package","Feature Service","Stream Service","Map Service","Vector Tile Service","Image Service","WMS","WFS","WMTS","KML","KML Collection","Globe Service","CSV","Shapefile","GeoJson","Service Definition","File Geodatabase","CAD Drawing","Relational Database Connection"],not:["Web Mapping Application","Geodata Service"]}},{typekeywords:["OGC","Geodata Service"]}],$document:[{type:["PDF","Microsoft Excel","Microsoft Word","Microsoft Powerpoint","iWork Keynote","iWork Pages","iWork Numbers","Visio Document","Document Link"]}],$initiative:[{type:"Hub Initiative"}],$experience:[{type:"Web Experience"}],$feedback:[{type:"Form"}],$page:[{typekeywords:"hubPage"}],$site:[{type:["Hub Site Application","Site Application"]}],$storymap:[{type:"Storymap"},{type:"Web Mapping Application",typekeywords:"Story Map"}],$template:[{type:["Web Mapping Application","Hub Initiative","Hub Initiative Template","Solution"],typekeywords:{any:["hubInitiativeTemplate","hubSolutionTemplate","Template"],not:"Deployed"}}],$webmap:[{type:{any:["Web Map","Web Scene"],not:"Web Mapping Application"}}]};function un(t){const e=lt(t);e.filters=e.filters.map((t=>{let e=false;t.predicates=t.predicates.reduce(((t,n)=>{if(ln(n.type)){const r=dn(n.type);t=[...t,...r];e=true}else{t.push(n)}return t}),[]);if(e){t.operation="OR"}return t}));return e}function ln(t){let e=false;if(typeof t==="string"){e=t in cn}return e}function dn(t){return cn[t]}function fn(t){const e=t.aggregations.aggregations.map((t=>({mode:"terms",field:t.field,values:t.aggregations.map((t=>({value:t.label,count:t.value})))})));return{total:0,results:[],hasNext:false,next:()=>null,aggregations:e}}function pn(t,e){const n=`terms(fields=(${e.aggFields.join()}))`;const r=ut(e,"requestOptions.authentication.token");return{aggregations:n,token:r}}function hn(t){const e=Object.entries(t).filter((([t,e])=>!!e)).map((([t,e])=>`${t}=${e}`)).join("&");return e&&`?${e}`}async function mn(t,e,n){var r;const i=((r=n.requestOptions)===null||r===void 0?void 0:r.fetch)||fetch;const o=t+hn(e);const s=await i(o,{method:"GET"});if(!s.ok){throw new Pe(s.statusText,o,s.status)}return s.json()}async function gn(t,e){const n=e.api;const r=`${n.url}/aggregations`;const i=pn(t,e);const o=await mn(r,i,e);return fn(o)}function bn(t,e,n){const r=t.links.find((t=>t.rel==="next"));let i=()=>null;if(r){i=()=>{const t=new URL(r.href);const i=+t.searchParams.get("startindex");const o=Object.assign(Object.assign({},n),{start:i});return In(e,o)}}return i}function vn(t,e,n){const r=t.properties;return an(r,e,n)}async function wn(t,e,n){const r=await Promise.all(t.features.map((t=>vn(t,n.include,n.requestOptions))));const i=bn(t,e,n);const o=t.links.find((t=>t.rel==="next"));return{total:t.numberMatched,results:r,hasNext:!!o,next:i}}function yn(t){return t.filters.map(kn).filter((t=>t!=="()")).join(" AND ")}function kn(t){const e=t.operation||"OR";const n=t.predicates.map(On).filter((t=>t!=="()")).join(` ${e} `);return`(${n})`}function On(t){const e=Object.entries(t).filter((([t,e])=>t!=="term"&&!!e)).reduce(((t,[e,n])=>{let r;if(typeof n==="string"){r=En(e,n)}else if(Array.isArray(n)){r=$n(e,n)}else if(Sn(n)){r=Dn(e,n)}else{r=An(e,n)}t.push(r);return t}),[]).join(" AND ");return`(${e})`}function Sn(t){return Number.isInteger(t.from)&&Number.isInteger(t.to)}function Dn(t,e){return`${t} BETWEEN ${e.from} AND ${e.to}`}function En(t,e){return`${t}=${Nn(e)}`}function $n(t,e){const n=e.map(Nn);return`${t} IN (${n.join(", ")})`}function An(t,e){const n=xn(t,e.any);const r=jn(t,e.all);const i=Tn(t,e.not);return[n,r,i].filter((t=>!!t)).join(" AND ")}function xn(t,e){let n;if(Array.isArray(e)){const r=e.map(Nn);n=`${t} IN (${r.join(", ")})`}else if(e){n=En(t,e)}return n}function jn(t,e){let n;if(Array.isArray(e)){n=e.map((e=>En(t,e))).join(" AND ")}else if(e){n=En(t,e)}return n}function Tn(t,e){let n;if(e){const r=Array.isArray(e)?e:[e];const i=r.map(Nn);n=`${t} NOT IN (${i.join(", ")})`}return n}function Nn(t){const e=/\s/;return e.test(t)?`'${t}'`:t}function Rn(t){const e=t.filters.filter((t=>t.predicates.find((t=>!!t.term))));const n=Pn(e);return n===null||n===void 0?void 0:n.term}function Pn(t){let e;if(t.length>1){throw new Error(`IQuery can only have 1 IFilter with a 'term' predicate but ${t.length} were detected`)}if(t.length){const n=t[0];const r=n.predicates.filter((t=>!!t.term));if(r.length>1){throw new Error(`IQuery can only have 1 'term' predicate but ${r.length} were detected`)}if(n.operation!=="AND"&&n.predicates.length>1){throw new Error(`'term' predicates cannot be OR'd to other predicates`)}const i=r[0];if(typeof i.term!=="string"){throw new Error(`'term' predicate must have a string value, string[] and IMatchOptions are not allowed.`)}e=i}return e}function Cn(t,e){const n=yn(t);const r=ut(e,"requestOptions.authentication.token");const i=e.num;const o=e.start;const s=Rn(t);return{filter:n,token:r,limit:i,startindex:o,q:s}}async function In(t,e){const n=e.api;const r=`${n.url}/items`;const i=Cn(t,e);const o=await mn(r,i,e);return wn(o,t,e)}async function _n(t,e){var n;if(!e.useBeta){throw new Error("Not implemented")}return((n=e.aggFields)===null||n===void 0?void 0:n.length)?gn(t,e):In(t,e)}async function qn(t,e){if(!e.requestOptions){throw new ie("portalSearchGroups","options.requestOptions is required.")}t.filters=t.filters.map((t=>{t.predicates=t.predicates.map(Ve);return t}));const n=Be(t);const r=["num","sortField","sortOrder","include","start","requestOptions"];r.forEach((t=>{if(e.hasOwnProperty(t)){n[t]=e[t]}}));if(e.requestOptions.authentication){n.authentication=e.requestOptions.authentication}else{n.portal=e.requestOptions.portal}return Mn(n)}async function Mn(t){const e=await rt(t);const n=e=>Un(e,t.include,t.requestOptions);const r=await Promise.all(e.results.map(n));return{total:e.total,results:r,hasNext:e.nextStart>-1,next:He(t,e.nextStart,e.total,Mn)}}async function Un(t,e=[],n){return zn(t,e,n)}const Wn=t=>{const{data:e,stack:n,requestOptions:r}=t;const i=n.start("enrichUserOrg");const o=Object.assign(Object.assign({},r),{portal:`${_t(r.portal)}/sharing/rest`});return ue(e.user.orgId,o).then((t=>{n.finish(i);return{data:Object.assign(Object.assign({},e),{org:t}),stack:n,requestOptions:r}})).catch((e=>Gn(e,t,i)))};const Gn=(t,e,n)=>{const{data:r,stack:i,requestOptions:o}=e;i.finish(n,{error:t});return{data:Object.assign(Object.assign({},r),{errors:ke(t,r.errors)}),stack:i,requestOptions:o}};const Fn={org:Wn};function Ln(t,e,n){const r=e.reduce(((t,e)=>{const n=Fn[e];n&&t.push(n);return t}),[]);const i=bt(r);return i({data:{user:t},stack:new ae,requestOptions:n}).then((t=>t.data))}async function Hn(t,e,n){const r={access:t.access,id:t.username,type:"User",name:t.fullName,owner:t.username,summary:t.description,createdDate:new Date(t.created),createdDateSource:"user.created",updatedDate:new Date(t.modified),updatedDateSource:"user.modified",family:"people",links:{self:"not-implemented",siteRelative:"not-implemented",thumbnail:"not-implemented"}};const i=["org.name AS orgName"];e=[...i,...e].filter(ft);const o=e.map(se);const s=vt("enrichment",o).filter(ft);let a={};if(s.length){a=await Ln(t,s,n)}o.forEach((t=>{r[t.prop]=ut(a,t.path)}));const c=n.authentication.token;r.links.thumbnail=Ke(n.portal,t,c);r.links.self=Mt(r.id,n);r.links.siteRelative=`/people/${r.id}`;return r}async function Jn(t,e){if(!e.requestOptions){throw new ie("portalSearchUsers","requestOptions: IHubRequestOptions is required.")}if(!e.requestOptions.authentication){throw new ie("portalSearchUsers","requestOptions must pass authentication.")}t.filters=t.filters.map((t=>{t.predicates=t.predicates.map(Ve);return t}));const n=Be(t);const r=["num","sortField","sortOrder","include","start","requestOptions"];r.forEach((t=>{if(e.hasOwnProperty(t)){n[t]=e[t]}}));n.authentication=e.requestOptions.authentication;return Kn(n)}async function Kn(t){const e=await at(t);const n=e=>Vn(e,t.include,t.requestOptions);const r=await Promise.all(e.results.map(n));return{total:e.total,results:r,hasNext:e.nextStart>-1,next:He(t,e.nextStart,e.total,Kn)}}async function Vn(t,e=[],n){return Hn(t,e,n)}async function Bn(t,e){if(!t){throw new ie("hubSearch","Query is required.")}if(!t.filters||!t.filters.length){throw new ie("hubSearch","Query must contain at least one Filter.")}if(!e.requestOptions){throw new ie("hubSearch","requestOptions: IHubRequestOptions is required.")}if(!e.include){e.include=[]}const n=t.targetEntity;const r=Ge(e.api||"arcgis").type;const i={arcgis:{item:on,group:qn,user:Jn},"arcgis-hub":{item:_n}};const o=ut(i,`${r}.${n}`);if(!o){throw new ie(`hubSearch`,`Search via "${n}" filter against "${r}" api is not implemented. Please ensure "targetEntity" is defined on the query.`)}return o(lt(t),e)}async function zn(t,e,n){const r={access:t.access,id:t.id,type:"Group",name:t.title,owner:t.owner,summary:t.snippet||t.description,createdDate:new Date(t.created),createdDateSource:"group.created",updatedDate:new Date(t.modified),updatedDateSource:"group.modified",family:"team",links:{self:"not-implemented",siteRelative:"not-implemented",thumbnail:"not-implemented"}};r.isSharedUpdate=(t.capabilities||[]).includes("updateitemcontrol");r.membershipAccess=t.membershipAccess;r.isOpenData=!!t.isOpenData;const i=[];e=[...i,...e].filter(ft);const o=e.map(se);const s=vt("enrichment",o).filter(ft);let a={};if(s.length){a=await Ue(t,s,n)}o.forEach((t=>{r[t.prop]=ut(a,t.path)}));r.links.thumbnail=Je(n.portal,t);r.links.self=qt(r.id,n);r.links.siteRelative=`/teams/${r.id}`;return r}class Qn extends Pe{constructor(t,e,n,r){super(t,e,n);this.error=r}}function Yn(t){const{token:e,authentication:n}=t;let r=()=>Promise.resolve(e);if(n){r=n.getToken.bind(n,n.portal)}return r()}function Xn(t,e,n){const r=new Headers(e.headers);r.append("Content-Type","application/json");if(n){r.append("Authorization",`Bearer ${n}`)}const i={headers:r,method:e.httpMethod||"GET",mode:e.mode,cache:e.cache,credentials:e.credentials};const o=Tt({host:e.hubApiUrl||"https://hub.arcgis.com",path:"/api/discussions/v1"});if(e.data){if(e.httpMethod==="GET"){const n=new URLSearchParams(e.data).toString();t+=`?${n}`}else{i.body=JSON.stringify(e.data)}}const s=[o.replace(/\/$/,""),t.replace(/^\//,"")].join("/");return fetch(s,i).then((t=>{if(t.ok){return t.json()}else{const{statusText:e,status:n}=t;return t.json().then((t=>{throw new Qn(e,s,n,JSON.stringify(t.message))}))}}))}function Zn(t,e){return Yn(e).then((n=>Xn(t,e,n)))}function tr(t){const e=`/posts`;t.httpMethod="GET";return Zn(e,t)}function er(t){const e=`/posts`;return Zn(e,Object.assign({httpMethod:"POST"},nr(t)))}function nr(t){const{mentionUrl:e}=t,n=$(t,["mentionUrl"]);if(e){n.headers=Object.assign(Object.assign({},n.headers),{"mention-url":e})}return n}function rr(t){t.httpMethod="GET";return Zn(`/channels`,t)}function ir(t){t.httpMethod="POST";return Zn(`/channels`,t)}var or;(function(t){t["ASC"]="ASC";t["DESC"]="DESC"})(or||(or={}));var sr;(function(t){t["THUMBS_UP"]="thumbs_up";t["THUMBS_DOWN"]="thumbs_down";t["THINKING"]="thinking";t["HEART"]="heart";t["ONE_HUNDRED"]="one_hundred";t["SAD"]="sad";t["LAUGH"]="laugh";t["SURPRISED"]="surprised"})(sr||(sr={}));var ar;(function(t){t["PUBLIC"]="public";t["ORG"]="org";t["PRIVATE"]="private"})(ar||(ar={}));var cr;(function(t){t["PENDING"]="pending";t["APPROVED"]="approved";t["REJECTED"]="rejected";t["DELETED"]="deleted";t["HIDDEN"]="hidden"})(cr||(cr={}));var ur;(function(t){t["GROUP"]="group";t["CONTENT"]="content"})(ur||(ur={}));var lr;(function(t){t["HUB"]="hub";t["AGO"]="ago";t["URBAN"]="urban"})(lr||(lr={}));var dr;(function(t){t["REPLIES"]="replies";t["REACTIONS"]="reactions";t["PARENT"]="parent";t["CHANNEL"]="channel"})(dr||(dr={}));var fr;(function(t){t["POST"]="post"})(fr||(fr={}));var pr;(function(t){t["HAS_USER_POSTS"]="has_user_posts"})(pr||(pr={}));var hr;(function(t){t["CREATED_AT"]="createdAt";t["CREATOR"]="creator";t["EDITOR"]="editor";t["ID"]="id";t["UPDATED_AT"]="updatedAt"})(hr||(hr={}));var mr;(function(t){t["READ"]="read";t["WRITE"]="write";t["READWRITE"]="readWrite";t["MODERATE"]="moderate";t["MANAGE"]="manage";t["OWNER"]="owner"})(mr||(mr={}));var gr;(function(t){t["BODY"]="body";t["CHANNEL_ID"]="channelId";t["CREATED_AT"]="createdAt";t["CREATOR"]="creator";t["DISCUSSION"]="discussion";t["EDITOR"]="editor";t["ID"]="id";t["PARENT_ID"]="parentId";t["STATUS"]="status";t["TITLE"]="title";t["UPDATED_AT"]="updatedAt"})(gr||(gr={}));var br;(function(t){t["Text"]="text";t["Announcement"]="announcement";t["Poll"]="poll";t["Question"]="question"})(br||(br={}));var vr;(function(t){t["ACCESS"]="access";t["CREATED_AT"]="createdAt";t["CREATOR"]="creator";t["EDITOR"]="editor";t["ID"]="id";t["LAST_ACTIVITY"]="last_activity";t["UPDATED_AT"]="updatedAt"})(vr||(vr={}));var wr;(function(t){t["SETTINGS"]="settings";t["CHANNEL_ACL"]="channelAcl"})(wr||(wr={}));var yr;(function(t){t["GROUP"]="group";t["ORG"]="org";t["USER"]="user";t["ANONYMOUS_USER"]="anonymousUser";t["AUTHENTICATED_USER"]="authenticatedUser"})(yr||(yr={}));var kr;(function(t){t["ADMIN"]="admin";t["MEMBER"]="member"})(kr||(kr={}));const Or=":host{display:block}";const Sr=class{constructor(e){t(this,e);this.groups=[]}async componentWillRender(){this.groups=await this.getGroups(k.user)}async getGroups(t){if(!t){return[]}const e=(new tt).match(t.username).in("owner");const n=await rt({q:e,portal:`${k.app.portal}/sharing`});console.log({groups:n});return n.results}async requestChannel(t){const e={access:ar.PUBLIC,groups:[t],defaultPostStatus:cr.APPROVED};console.debug("createChannel",{groupId:t});const n=ir(Object.assign({data:e},k.context.hubRequestOptions));console.debug("createChannel",{response:n})}render(){return e(n,null,e("slot",null),e("calcite-list",null,this.groups.map((t=>e("calcite-list-item",{label:t.title,description:t.snippet},e("calcite-avatar",{scale:"m",slot:"content-start",thumbnail:"https://www.seekpng.com/png/detail/90-906849_89kib-1024x631-finn-finn-adventure-time-face.png"}),e("calcite-dropdown",{scale:"m",slot:"actions-end"},e("calcite-action",{icon:"ellipsis",label:"menu",slot:"dropdown-trigger"}),e("calcite-dropdown-group",null,e("calcite-dropdown-item",{id:`group-${t.id}`,onclick:()=>{this.requestChannel(t.id)}},"Create Channel"))))))))}};Sr.style=Or;const Dr=":host{display:block}";const Er=class{constructor(e){t(this,e);this.channels=[]}async componentWillLoad(){this.channels=await this.getChannels()}async getChannels(){const t={};const e=await rr(Object.assign({data:t},k.context.hubRequestOptions));return e.items}render(){console.log("Render channels",this.channels);return e(n,null,e("slot",null),e("calcite-list",null,this.channels.map((t=>e("calcite-list-item",{label:t.id,description:`Channel creator: ${t.creator}`},e("calcite-icon",{scale:"s",icon:"speech-bubble",slot:"content-start"}))))))}};Er.style=Dr;const $r=":host{display:block}#posts{min-height:calc(100vh-70px);overflow-y:scroll}#editor{height:70px;bottom:0px;position:sticky;background-color:white}";const Ar=class{constructor(e){t(this,e);this.channelId=null;this.posts=[]}async componentWillLoad(){this.posts=await this.getChannelPosts(this.channelId)}async getChannelPosts(t){console.debug("getChannelPosts",{channel:t});const e={channels:[this.channelId]};const n=await tr(Object.assign({data:e},k.context.hubRequestOptions));return n.items}render(){console.log("Render posts",this.posts);return e(n,null,e("slot",null),e("calcite-list",{id:"posts"},this.posts.map((t=>e("calcite-list-item",{description:t.creator,label:t.body},e("calcite-icon",{scale:"s",icon:"speech-bubble",slot:"content-start"}),e("div",{slot:"content-end"},c(t.createdAt),e("calcite-chip",{class:"list-chip",icon:"organization",scale:"s"},"Staff")))))),e("hub-discussions-post-editor",{id:"editor","channel-id":this.channelId}))}};Ar.style=$r;const xr=":host{display:block;padding:0.2rem}#prompt{font-weight:400;font-style:italic}";const jr=class{constructor(e){t(this,e);this.channelId=null}componentDidRender(){console.log("postEditor did render",this.postBodyInput)}postSubmitted(t){console.log("postSubmitted",{value:this.postBodyInput.value,_evt:t});this.createPost(this.postBodyInput.value)}async createPost(t){const e={channelId:this.channelId,body:t};const n=er(Object.assign({data:e},k.context.hubRequestOptions));return n}render(){return e(n,null,e("slot",null),e("calcite-label",null,e("span",{id:"prompt"},"What's on your mind?"),e("calcite-input",{id:"input-with-text-area",type:"input",value:"",placeholder:"Write your discussion post.",alignment:"start","number-button-type":"vertical",scale:"m",status:"idle",ref:t=>this.postBodyInput=t},e("calcite-button",{slot:"action",onclick:this.postSubmitted.bind(this)},"post")),e("calcite-input-message",{status:"idle",scale:"m"},"help")))}};jr.style=xr;function Tr(t,e){let n;const r=Object.assign({},e);if(t==="cancelled"){if(!e.orderByFields){r.orderByFields="EditDate DESC"}n=`isCancelled=1 AND status<>'draft'`}else if(t==="draft"){if(!e.orderByFields){r.orderByFields="EditDate DESC"}const t=e.authentication;const i=t?t.username:null;n=`Creator = '${i}' AND status = 'draft'`}else{if(!e.orderByFields){r.orderByFields=t==="upcoming"?"startDate ASC":"startDate DESC"}const i=t==="upcoming"?">":"<=";n=`endDate${i}CURRENT_TIMESTAMP AND (isCancelled<>1 OR isCancelled IS NULL) AND status<>'draft'`}if(e.where){r.where=`${e.where} AND ${n}`}else{r.where=n}return r}function Nr(t){const e=Object.assign({returnGeometry:true},t);return Xt(e).then((n=>{if(n.features.length<=0){return{data:[],included:[]}}if(e.authentication){return e.authentication.getToken(e.url).then((r=>Rr(n.features,e.url,t,r)))}else{return Rr(n.features,e.url,t)}}))}function Rr(t,e,n,r){const i=[];const o=[];const s=[];const a=(new Date).getTime();let c="";t.forEach((function(t){const n=t.attributes;const s=t.geometry;let u=null;if(n.imageAttributes){const t=JSON.parse(n.imageAttributes);if(t.crop){u=`${e}/${n.OBJECTID}/attachments/${t.crop}?v=${a}`;if(r){u+=`&token=${r}`}}}o.push({id:n.OBJECTID,type:"events",imageUrl:u,attributes:n,geometry:s});const l=n.siteId;if(l!=null&&i.indexOf(l)===-1){i.push(l);c+=c.length>0?" OR id:":"id:";c+=l}}));if(i.length===0){return{included:s,data:o}}const u=n;u.q=c;return nt(u).then((function(t){t.results.forEach((t=>{s.push({id:t.id,type:`sites`,attributes:{id:t.id,url:t.url}})}));return{included:s,data:o}}))}async function Pr(t){let e=[];let n=await rt(Object.assign({q:"tags:Hub Event Group",params:{searchUserAccess:"groupMember",num:100}},t.requestOptions));let r=n.results.reduce(((t,e)=>{t.push(`groupId = '${e.id}'`);return t}),[]);try{const n=await K(t.eventsConfig.publicViewId,Object.assign({},t.requestOptions));const i=`${n.url}/0`;const o=Tr("upcoming",{url:i,authentication:t.session});if(!!r){o.where+=` AND (${r.join(" OR ")})`}console.debug("getMemberEvents: getEventQueryFromType",{searchOptions:o});let s=await Nr(o);console.debug("getMemberEvents: searchEvents",[o,s]);e=s.data.reduce(((t,e)=>{t.push(e.attributes);return t}),[])}catch(e){console.error("Error in getMemberEvents",{error:e,context:t,portalUrl:t.portalUrl})}console.debug("getEvents 1",{events:e,groups:n,eventGroups:r});return{results:e,meta:{total:r.length,count:e.length,start:1}}}const Cr=":host{display:block}";const Ir=class{constructor(e){t(this,e);this.events=[]}componentWillLoad(){this.getEvents()}async getEvents(){const t=await Pr(k.context);console.debug("getEvents",{results:t});this.events=t.results}render(){return e(n,null,e("slot",null),e("calcite-list",{id:"posts"},this.events.map((t=>e("calcite-list-item",{label:t["title"],description:t["description"]},e("calcite-icon",{scale:"s",icon:"event",slot:"content-start"}),e("div",{slot:"content-end"}))))))}};Ir.style=Cr;const _r=":host{display:block}.entry{display:block;border-bottom:1px solid gray;padding:0.5rem 0.2rem}.title{font-weight:500}.timestamp{font-size:0.6rem;font-weight:300;margin-left:0.2rem}";const qr=class{constructor(e){t(this,e);this.collection=null;this.entries=[]}async componentWillRender(){await this.fetchResults()}async fetchResults(){var t,e;if(!!((t=this.collection)===null||t===void 0?void 0:t.scope)){const t=(e=this.collection)===null||e===void 0?void 0:e.scope;const n={sortOrder:"desc",sortField:"modified",requestOptions:k.context.hubRequestOptions};const r=await Bn(t,n);this.entries=r.results}}render(){var t;return e(n,null,e("slot",null),e("calcite-list",null,(t=this.entries)===null||t===void 0?void 0:t.map((t=>e("calcite-list-item",{label:t.name,description:c(t.updatedDate)},e("calcite-icon",{scale:"s",icon:"files",slot:"content-start"}),e("calcite-dropdown",{scale:"m",slot:"actions-end"},e("calcite-action",{icon:"ellipsis",label:"menu",slot:"dropdown-trigger"}),e("calcite-dropdown-group",null,e("calcite-dropdown-item",{onclick:()=>{window.open(`${k.context.hubUrl}/content/${t.id}`,"_blank")}},"View Item"))))))))}};qr.style=_r;const Mr=":host{display:block}";const Ur=class{constructor(e){t(this,e);this.statusTypes={normal:{icon:"thumbs-up",color:"green"},degraded:{icon:"exclamation-mark-circle",color:"yellow"},down:{icon:"x-octagon-f",color:"red"}};this.statusUrl="https://arcgis.github.io/hub-status/status.json";this.status={}}componentDidLoad(){this.fetchStatus()}async fetchStatus(){let t=await fetch(this.statusUrl);let e=await t.json();this.status=e}render(){var t,r,i,o;return e(n,null,e("calcite-list",{id:"status"},e("calcite-list-item",{label:"Overall",description:(r=(t=this.status)===null||t===void 0?void 0:t.overview)===null||r===void 0?void 0:r.status}),(o=(i=this.status)===null||i===void 0?void 0:i.services)===null||o===void 0?void 0:o.map((t=>{var n,r;return e("calcite-list-item",{label:t["Service Name"],description:(r=(n=this.status)===null||n===void 0?void 0:n.overview)===null||r===void 0?void 0:r.status},e("calcite-chip",{icon:this.statusTypes[t["Status"]].icon,slot:"content-end"},t["Status"]))}))))}};Ur.style=Mr;const Wr=":host{display:block;padding:0.5rem}";const Gr=class{constructor(e){t(this,e)}render(){return e(n,null,e("slot",null))}};Gr.style=Wr;const Fr=":host{display:block}";const Lr=class{constructor(e){t(this,e);this.notifications=[]}componentWillLoad(){this.getNotifications()}async getNotifications(){const t=await st(Object.assign({},k.context.requestOptions));this.notifications=t.notifications}render(){return e(n,null,e("slot",null),e("calcite-list",{id:"posts"},this.notifications.map((t=>e("calcite-list-item",{label:t.type,description:t.data.groupTitle},e("calcite-icon",{scale:"s",icon:"envelope",slot:"content-start"}),e("div",{slot:"content-end"},c(t.received)))))))}};Lr.style=Fr;function Hr(t){var e,n;const r={key:"collection",label:"collection",targetEntity:(e=t.type)!==null&&e!==void 0?e:"item",scope:{targetEntity:(n=t.type)!==null&&n!==void 0?n:"item",filters:[{predicates:[]}]}};if(!!t.query){r.scope.filters[0].predicates.push({term:t.query})}if(!!t.groups){r.scope.filters[0].predicates.push({group:t.groups})}return r}const Jr=':host{display:block;overflow:scroll}.workspace{display:grid;grid-template-columns:10rem auto;grid-template-rows:auto;grid-template-areas:"global global"\n    "header header"\n    "navigation space"\n    "footer footer"}#global{grid-area:global;background-color:#4e4e4e}#header{grid-area:header;border-bottom:1px solid gray;display:none}#navigation{grid-area:navigation;border-right:1px solid gray}#footer{grid-area:footer;border-top:1px solid gray;background-color:#fefefe;padding:2rem;margin-top:1rem}#space{grid-area:space}#space div{display:grid;grid-template-columns:repeat( auto-fit, minmax(300px, 1fr) );gap:10px;grid-auto-rows:minmax(100px, auto);padding:1rem}';const Kr=class{constructor(e){t(this,e);this.client=null;this.redirect=null;this.portal="https://www.arcgis.com"}componentWillLoad(){}render(){k.app={client:this.client,redirect:this.redirect,portal:this.portal};return e(n,null,e("div",{class:"workspace"},e("div",{id:"global"},e("workspace-navigation",null)),e("div",{id:"header"},e("slot",{name:"header"})),e("div",{id:"navigation"},"navigation"),e("div",{id:"space"},!!k.user?this.renderWorkspace():[]),e("div",{id:"footer"},e("em",null,"footer..."))))}renderWorkspace(){return e("div",null,e("workspace-card",null,e("span",{slot:"title"},"About this Workspace"),e("hub-text",null,"Personalized workspace for ",e("a",{href:`${k.context.hubUrl}/people/${k.user.username}`},k.user.fullName),".",e("br",null),e("br",null),"There is quick access to my favorites, specific project discussions, and recent content.")),e("workspace-card",null,e("span",{slot:"title"},"Project Discussion"),e("hub-discussions-moderation",{"channel-id":"0311a680ff1b44389ad0392f94d5bbbb"})),e("workspace-card",null,e("span",{slot:"title"},"Recent Updates"),e("hub-feed",{collection:Hr({query:["Initiative"],type:"item"})})),e("workspace-card",null,e("span",{slot:"title"},"Notifications"),e("hub-user-notifications",null)),e("workspace-card",null,e("span",{slot:"title"},"Favorites"),e("hub-feed",{collection:Hr({groups:[k.user.favGroupId],type:"item"})})),e("workspace-card",null,e("span",{slot:"title"},"Upcoming Events"),e("hub-events",null)),e("workspace-card",null,e("span",{slot:"title"},"Collaborations"),e("hub-collaborations",null)),e("workspace-card",null,e("span",{slot:"title"},"Channels"),e("hub-discussions-channels",null)),e("workspace-card",null,e("span",{slot:"title"},"Hub Changelog"),e("hub-changelog",null)),e("workspace-card",null,e("span",{slot:"title"},"Hub Status"),e("hub-status",null)),e("workspace-card",null,e("span",{slot:"title"},"Work in Progress"),e("hub-text",null,"Todo:",e("ol",null,e("li",null,"Make Engagement Stats dynamic"),e("li",null,"Add Nearby based on User places of interest")))),e("workspace-card",null,e("span",{slot:"title"},"Engagement Stats"),e("hub-activity-stats",null)),e("workspace-card",null,e("span",{slot:"title"},"Nearby"),e("em",null,"map coming...")))}};Kr.style=Jr;const Vr=":host{display:block;width:auto;height:300px;border:1px solid rgb(161, 161, 161);position:relative;overflow:auto}.title{font-weight:600;width:100%;display:block;border-bottom:1px solid #888;background-color:#f0f0f0;padding:0.5rem;height:20px;position:sticky;top:0px;z-index:100}.tab{line-height:3em;display:none;cursor:pointer}:host(:hover) .tab{display:block;position:absolute;cursor:pointer;top:-10px;border:1px solid #AAA;background-color:#DDD}";const Br=class{constructor(e){t(this,e)}render(){return e(n,null,e("div",{class:"tab"},this.renderTab()),e("div",{class:"tab-content"},e("span",{class:"title"},e("slot",{name:"title"})),e("span",{class:"body"},e("slot",null))))}renderTab(){return e("calcite-list",null,e("calcite-list-item",{label:"Card",description:""},e("calcite-action",{icon:"drag",label:"drag",scale:"s",slot:"actions-start"}),e("calcite-action",{icon:"pencil",label:"edit",slot:"actions-end"}),e("calcite-action",{icon:"x",label:"delete",slot:"actions-end"}),e("calcite-action",{icon:"ellipsis",label:"menu",slot:"actions-end"})))}};Br.style=Vr;const zr=":host{display:block}#title{color:white;font-size:500;padding:auto 0}#profile{float:right}";const Qr=class{constructor(e){t(this,e)}signinClick(){const t=new CustomEvent("arcgisAppIdentityStartSignIn");document.dispatchEvent(t)}signoutClick(){const t=new CustomEvent("arcgisAppIdentityStartSignOut");document.dispatchEvent(t)}signedinEvent(t){k.context=t.detail}signedoutEvent(t){k.context=null}render(){return e(n,null,e("slot",null),e("span",{id:"title"},"ArcGIS Hub"),e("span",{id:"profile"},e("arcgis-app-identity",{"client-id":k.app.client,"redirect-uri":k.app.redirect,portal:k.app.portal}),this.renderIdentity()))}renderIdentity(){var t;if(!!k.user){return e("calcite-dropdown",null,e("calcite-button",{slot:"dropdown-trigger"},(t=k.user)===null||t===void 0?void 0:t.fullName),e("calcite-dropdown-group",null,e("calcite-dropdown-item",{onclick:this.signoutClick},"Sign Out")))}else{return e("calcite-button",{ref:t=>this.signinButton=t,onclick:this.signinClick},"Sign In")}}};Qr.style=zr;export{s as hub_activity_stats,d as hub_changelog,Sr as hub_collaborations,Er as hub_discussions_channels,Ar as hub_discussions_moderation,jr as hub_discussions_post_editor,Ir as hub_events,qr as hub_feed,Ur as hub_status,Gr as hub_text,Lr as hub_user_notifications,Kr as hub_user_workspace,Br as workspace_card,Qr as workspace_navigation};
//# sourceMappingURL=p-2418d414.entry.js.map